(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[145],{923:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>i});var a=t(5155),r=t(2115),l=t(574),n=t(5016);let i=l.bL,c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r})});c.displayName=l.B8.displayName;let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r})});d.displayName=l.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});o.displayName=l.UC.displayName},3757:(e,s,t)=>{"use strict";t.d(s,{e:()=>d});var a=t(5155),r=t(2115),l=t(5016),n=t(2001),i=t(5229),c=t(1786);function d(e){let{accept:s,onFileSelect:t,selectedFile:d,label:o="Drop file here or click to browse",description:m}=e,p=(0,r.useCallback)(e=>{e.preventDefault();let s=e.dataTransfer.files[0];s&&t(s)},[t]);return d?(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 border rounded-lg bg-muted/50",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 text-primary"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm truncate",children:d.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(d.size/1024/1024).toFixed(2)," MB"]})]}),(0,a.jsx)("button",{onClick:()=>{t(null)},className:"p-1 hover:bg-destructive/10 rounded transition-colors",children:(0,a.jsx)(i.A,{className:"h-4 w-4 text-destructive"})})]}):(0,a.jsxs)("div",{onDrop:p,onDragOver:e=>e.preventDefault(),className:(0,l.cn)("border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer","hover:border-primary hover:bg-primary/5"),children:[(0,a.jsx)("input",{type:"file",accept:s,onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];a&&t(a)},className:"hidden",id:"file-upload"}),(0,a.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer block",children:[(0,a.jsx)(c.A,{className:"mx-auto h-8 w-8 text-muted-foreground mb-2"}),(0,a.jsx)("p",{className:"font-medium",children:o}),m&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:m}),s&&(0,a.jsxs)("p",{className:"text-xs text-muted-foreground mt-2",children:["Accepted: ",s]})]})]})}},4542:(e,s,t)=>{Promise.resolve().then(t.bind(t,5569))},5569:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>_});var a=t(5155),r=t(2115),l=t(3209),n=t(7003),i=t(7001),c=t(235),d=t(7060),o=t(923),m=t(7507),p=t(9827),u=t(3351),x=t(3757),h=t(5850),j=t(8171),v=t(1682),g=t(5130),f=t(2024),N=t(5626),b=t(9142),S=t(6667),y=t(5299),k=t(5921),w=t(9867),A=t(2619),C=t.n(A);let T={temperature:"Controls randomness in generation.",topK:"Limits token selection to top K most likely tokens.",topP:"Nucleus sampling threshold.",maxLength:"Maximum length of generated audio.",targetSpeaker:"Target speaker for target speaker extraction.",denoiseStrength:"Strength of speech enhancement (0.0-1.0)."},V=[{value:"default",label:"Default"},{value:"female-1",label:"Female 1"},{value:"female-2",label:"Female 2"},{value:"male-1",label:"Male 1"},{value:"male-2",label:"Male 2"}];function _(){let{toast:e}=(0,j.dj)(),[s,t]=(0,r.useState)("tts"),[A,_]=(0,r.useState)(""),[F,P]=(0,r.useState)(!1),[E,K]=(0,r.useState)(0),[J,D]=(0,r.useState)(null),[I,L]=(0,r.useState)(null),[M,R]=(0,r.useState)(null),[B,U]=(0,r.useState)({task:"tts",temperature:.7,topK:50,topP:.9,maxLength:2048,voiceId:"default"}),[Z,O]=(0,r.useState)({task:"vc",temperature:.7,topK:50,topP:.9}),[X,G]=(0,r.useState)({task:"tse",temperature:.7,topK:50,targetSpeaker:"speaker1"}),[W,q]=(0,r.useState)({task:"se",temperature:.7,denoiseStrength:.5}),z=async()=>{if("tts"===s&&!A.trim())return void e({title:"Error",description:"Please enter text",variant:"destructive"});if(("vc"===s||"tse"===s||"se"===s)&&!I)return void e({title:"Error",description:"Please upload source audio",variant:"destructive"});if("vc"===s&&!M)return void e({title:"Error",description:"Please upload reference audio",variant:"destructive"});P(!0),K(0);try{let t=new FormData;t.append("task",s),"tts"===s?(t.append("text",A),t.append("temperature",B.temperature.toString()),t.append("top_k",B.topK.toString()),t.append("top_p",B.topP.toString()),t.append("max_length",B.maxLength.toString()),B.voiceId&&"default"!==B.voiceId&&t.append("voice_id",B.voiceId)):"vc"===s?(t.append("source_audio",I),t.append("reference_audio",M),t.append("temperature",Z.temperature.toString()),t.append("top_k",Z.topK.toString()),t.append("top_p",Z.topP.toString())):"tse"===s?(t.append("source_audio",I),t.append("temperature",X.temperature.toString()),t.append("top_k",X.topK.toString()),t.append("target_speaker",X.targetSpeaker)):"se"===s&&(t.append("source_audio",I),t.append("temperature",W.temperature.toString()),t.append("denoise_strength",W.denoiseStrength.toString()));let a=setInterval(()=>{K(e=>e>=90?e:e+10*Math.random())},500),r=await fetch("/api/tts/metis",{method:"POST",body:t});if(clearInterval(a),!r.ok)throw Error("Generation failed");let l=await r.blob();D(URL.createObjectURL(l)),K(100),e({title:"Success",description:"Audio generated with Metis (".concat(s.toUpperCase(),")")})}catch(s){e({title:"Error",description:String(s),variant:"destructive"})}finally{P(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto py-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)(C(),{href:"/tts",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-4",children:[(0,a.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Back to TTS"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Metis"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Foundation model for unified speech generation (TTS, VC, TSE, SE)"})]}),(0,a.jsxs)(o.tU,{value:s,onValueChange:t,className:"space-y-6",children:[(0,a.jsxs)(o.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(o.Xi,{value:"tts",children:[(0,a.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"TTS"]}),(0,a.jsxs)(o.Xi,{value:"vc",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"VC"]}),(0,a.jsxs)(o.Xi,{value:"tse",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"TSE"]}),(0,a.jsxs)(o.Xi,{value:"se",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"SE"]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)("div",{className:"space-y-4",children:"tts"===s&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),"Text Input"]})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(i.T,{value:A,onChange:e=>_(e.target.value),rows:8,placeholder:"Enter text to synthesize..."}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:[A.length," characters"]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(S.A,{className:"h-5 w-5"}),"Parameters"]})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(o.av,{value:"tts",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6",children:[[{key:"temperature",label:"Temperature",min:.1,max:1.5,step:.1},{key:"topK",label:"Top K",min:1,max:100,step:1},{key:"topP",label:"Top P",min:.1,max:1,step:.05},{key:"maxLength",label:"Max Length",min:256,max:4096,step:256}].map(e=>{var s;let{key:t,label:r,min:l,max:n,step:i}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[r," ",(0,a.jsx)(p.V,{content:T[t]})]}),(0,a.jsx)("span",{children:null==(s=B[t])?void 0:s.toString()})]}),(0,a.jsx)(d.A,{value:[B[t]],onValueChange:e=>{let[s]=e;return U(e=>({...e,[t]:s}))},min:l,max:n,step:i})]},t)}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.J,{children:"Voice"}),(0,a.jsxs)(m.l6,{value:B.voiceId,onValueChange:e=>U(s=>({...s,voiceId:e})),children:[(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{})}),(0,a.jsx)(m.gC,{children:V.map(e=>(0,a.jsx)(m.eb,{value:e.value,children:e.label},e.value))})]})]})]})}),(0,a.jsx)(o.av,{value:"vc",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),"Source Audio"]}),(0,a.jsx)(x.e,{accept:"audio/*",onFileSelect:L,selectedFile:I})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),"Reference Audio (Target Voice)"]}),(0,a.jsx)(x.e,{accept:"audio/*",onFileSelect:R,selectedFile:M})]}),[{key:"temperature",label:"Temperature",min:.1,max:1.5,step:.1},{key:"topK",label:"Top K",min:1,max:100,step:1},{key:"topP",label:"Top P",min:.1,max:1,step:.05}].map(e=>{var s;let{key:t,label:r,min:l,max:n,step:i}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[r," ",(0,a.jsx)(p.V,{content:T[t]})]}),(0,a.jsx)("span",{children:null==(s=Z[t])?void 0:s.toString()})]}),(0,a.jsx)(d.A,{value:[Z[t]],onValueChange:e=>{let[s]=e;return O(e=>({...e,[t]:s}))},min:l,max:n,step:i})]},t)})]})}),(0,a.jsx)(o.av,{value:"tse",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),"Mixed Audio (with multiple speakers)"]}),(0,a.jsx)(x.e,{accept:"audio/*",onFileSelect:L,selectedFile:I})]}),[{key:"temperature",label:"Temperature",min:.1,max:1.5,step:.1},{key:"topK",label:"Top K",min:1,max:100,step:1}].map(e=>{var s;let{key:t,label:r,min:l,max:n,step:i}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[r," ",(0,a.jsx)(p.V,{content:T[t]})]}),(0,a.jsx)("span",{children:null==(s=X[t])?void 0:s.toString()})]}),(0,a.jsx)(d.A,{value:[X[t]],onValueChange:e=>{let[s]=e;return G(e=>({...e,[t]:s}))},min:l,max:n,step:i})]},t)}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:["Target Speaker ",(0,a.jsx)(p.V,{content:T.targetSpeaker})]}),(0,a.jsxs)(m.l6,{value:X.targetSpeaker,onValueChange:e=>G(s=>({...s,targetSpeaker:e})),children:[(0,a.jsx)(m.bq,{children:(0,a.jsx)(m.yv,{})}),(0,a.jsxs)(m.gC,{children:[(0,a.jsx)(m.eb,{value:"speaker1",children:"Speaker 1"}),(0,a.jsx)(m.eb,{value:"speaker2",children:"Speaker 2"}),(0,a.jsx)(m.eb,{value:"speaker3",children:"Speaker 3"})]})]})]})]})}),(0,a.jsx)(o.av,{value:"se",className:"mt-0",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),"Noisy Audio"]}),(0,a.jsx)(x.e,{accept:"audio/*",onFileSelect:L,selectedFile:I})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:["Temperature ",(0,a.jsx)(p.V,{content:T.temperature})]}),(0,a.jsx)("span",{children:W.temperature})]}),(0,a.jsx)(d.A,{value:[W.temperature],onValueChange:e=>{let[s]=e;return q(e=>({...e,temperature:s}))},min:.1,max:1.5,step:.1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(c.J,{className:"flex items-center gap-2",children:["Denoise Strength ",(0,a.jsx)(p.V,{content:T.denoiseStrength})]}),(0,a.jsx)("span",{children:W.denoiseStrength})]}),(0,a.jsx)(d.A,{value:[W.denoiseStrength],onValueChange:e=>{let[s]=e;return q(e=>({...e,denoiseStrength:s}))},min:0,max:1,step:.05})]})]})})]})]}),(0,a.jsx)(n.$,{onClick:z,disabled:F||("tts"===s?!A.trim():!I)||"vc"===s&&!M,className:"w-full h-12",children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"mr-2 h-5 w-5 animate-spin"}),"Generating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.A,{className:"mr-2 h-5 w-5"}),"Generate"]})}),F&&(0,a.jsx)(h.k,{value:E}),J&&(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{children:(0,a.jsx)(l.ZB,{children:"Generated Audio"})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsx)(u.Y,{src:J}),(0,a.jsxs)(n.$,{variant:"outline",className:"w-full mt-4",onClick:()=>{let e=document.createElement("a");e.href=J,e.download="metis-".concat(s,"-").concat(Date.now(),".wav"),e.click()},children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Download WAV"]})]})]})]})]})]})]})}}},e=>{e.O(0,[552,159,64,619,2,556,160,441,255,358],()=>e(e.s=4542)),_N_E=e.O()}]);